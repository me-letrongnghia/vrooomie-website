<!-- Register Form Modal -->
<div class="register-modal" (click)="onClose()" *ngIf="!showSuccessModal && !showErrorModal">
  <div class="register-form" (click)="$event.stopPropagation()">
    <button class="close-button" (click)="onClose()">âœ•</button>
    <h2>ÄÄƒng kÃ½</h2>
    
    <form [formGroup]="registerForm" (ngSubmit)="submitForm()">

      <div class="form-group">
        <label for="displayName">TÃªn hiá»ƒn thá»‹</label>
        <input type="text" id="fullName" name="fullName" placeholder="" formControlName="fullName" required />
        <div class="input-requirements" *ngIf="fullName?.invalid && (fullName?.dirty || fullName?.touched)">
          <small>TÃªn hiá»ƒn thá»‹ tá»‘i thiá»ƒu 3 kÃ½ tá»±</small>
        </div>
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" id="email" name="email" placeholder="" formControlName="email" required />
        <div class="input-requirements" *ngIf="email?.invalid && (email?.dirty || email?.touched)">
          <small>Vui lÃ²ng nháº­p email há»£p lá»‡</small>
        </div>
      </div>
      
      <div class="form-group">
        <label for="password">Máº­t kháº©u</label>
        <div class="password-field">
          <input type="password" id="password" name="password" placeholder="" formControlName="password" required />
        </div>
        <div class="input-requirements" *ngIf="password?.invalid && (password?.dirty || password?.touched)">
          <small>Máº­t kháº©u tá»‘i thiá»ƒu 8 kÃ½ tá»±</small>
        </div>
        <div class="input-requirements" *ngIf="password?.invalid && (password?.dirty || password?.touched)">
          <small>Bao gá»“m Ã­t nháº¥t 1 kÃ­ tá»± in hoa vÃ  1 chá»¯ sá»‘</small>
        </div>
      </div>
      
      <div class="form-group">
        <label for="confirmPassword">Nháº­p láº¡i máº­t kháº©u</label>
        <div class="password-field">
          <input type="password" id="confirmPassword" name="confirmPassword" placeholder="" formControlName="confirmPassword" required />
        </div>
        <div class="input-requirements" *ngIf="confirmPassword?.invalid && (confirmPassword?.dirty || confirmPassword?.touched)">
          <small>Vui lÃ²ng xÃ¡c nháº­n máº­t kháº©u</small>
        </div>
      </div>

      <div class="form-group">
        <label for="role">Báº¡n muá»‘n?</label>
        <select id="role" name="role" formControlName="role" required>
          <option value="RENTER">ThuÃª xe</option>
          <option value="OWNER">Cho thuÃª xe</option>
        </select>
        <div class="input-requirements" *ngIf="role?.invalid && (role?.dirty || role?.touched)">
          <small>Vui lÃ²ng khÃ´ng Ä‘á»ƒ trá»‘ng</small>
        </div>
      </div>
      
      <div class="terms-checkbox">
        <input type="checkbox" id="terms" name="terms" formControlName="terms" required />
        <label for="terms">
          TÃ´i Ä‘Ã£ Ä‘á»c vÃ  Ä‘á»“ng Ã½ vá»›i <a href="#" class="terms-link">ChÃ­nh sÃ¡ch & quy Ä‘á»‹nh</a> vÃ  <a href="#" class="privacy-link">ChÃ­nh sÃ¡ch báº£o vá»‡ dá»¯ liá»‡u cÃ¡ nhÃ¢n</a> cá»§a Vrooomie.
        </label>
      </div>
      
      <button type="submit" class="register-submit-button" [disabled]="registerForm.invalid">ÄÄƒng kÃ½</button>
    </form>
    
    <div class="login-prompt">
      ÄÃ£ cÃ³ tÃ i khoáº£n? <a href="#" class="login-link" (click)="onSwitchToLogin(); $event.preventDefault()">ÄÄƒng nháº­p ngay</a>
    </div>
    
    <div class="social-login">
      <button class="social-button facebook">
        <span class="social-icon"><i class="fa-brands fa-facebook-f"></i></span>
        Facebook
      </button>
      <button class="social-button google">
        <span class="social-icon"><i class="fa-brands fa-google"></i></span>
        Google
      </button>
    </div>
  </div>
</div>

<!-- Success Modal -->
<div class="success-modal" *ngIf="showSuccessModal" (click)="closeSuccessModal()">
  <div class="success-content" (click)="$event.stopPropagation()">
    <div class="success-icon">
      <i class="fa-solid fa-circle-check"></i>
    </div>
    
    <h2 class="success-title">ÄÄƒng kÃ½ thÃ nh cÃ´ng!</h2>
    
    <div class="success-message">
      <p class="email-message">
        ChÃºng tÃ´i Ä‘Ã£ gá»­i má»™t email xÃ¡c thá»±c Ä‘áº¿n Ä‘á»‹a chá»‰:
      </p>
      <p class="user-email">{{ userEmail }}</p>
      <p class="instruction">
        Vui lÃ²ng kiá»ƒm tra email vÃ  nháº¥p vÃ o liÃªn káº¿t xÃ¡c thá»±c Ä‘á»ƒ kÃ­ch hoáº¡t tÃ i khoáº£n cá»§a báº¡n.
      </p>
    </div>
    
    <div class="success-actions">
      <button class="continue-button" (click)="closeSuccessModal()">
        Tiáº¿p tá»¥c Ä‘Äƒng nháº­p
      </button>
    </div>
    
    <div class="email-tips">
      <p class="tips-title">ğŸ’¡ KhÃ´ng tháº¥y email?</p>
      <ul class="tips-list">
        <li>Kiá»ƒm tra thÆ° má»¥c spam/junk mail</li>
        <li>Äáº£m báº£o Ä‘á»‹a chá»‰ email Ä‘Æ°á»£c nháº­p chÃ­nh xÃ¡c</li>
        <li>Email cÃ³ thá»ƒ máº¥t vÃ i phÃºt Ä‘á»ƒ Ä‘Æ°á»£c gá»­i Ä‘áº¿n</li>
      </ul>
    </div>
  </div>
</div>

<!-- Error Modal -->
<div class="error-modal" *ngIf="showErrorModal" (click)="closeErrorModal()">
  <div class="error-content" (click)="$event.stopPropagation()">
    <div class="error-icon">
      <i class="fa-solid fa-circle-xmark"></i>
    </div>
    
    <h2 class="error-title">ÄÄƒng kÃ½ tháº¥t báº¡i!</h2>
    
    <div class="error-message">
      <p class="main-error-message">{{ errorMessage }}</p>
      <p class="error-instruction">
        Vui lÃ²ng kiá»ƒm tra láº¡i thÃ´ng tin vÃ  thá»­ láº¡i.
      </p>
    </div>
    
    <div class="error-actions">
      <button class="retry-button" (click)="closeErrorModal()">
        Thá»­ láº¡i
      </button>
    </div>
    
    <div class="error-help">
      <p class="help-title">ğŸ’¡ Äáº£m báº£o:</p>
      <ul class="help-list">
        <li>Äiá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin theo yÃªu cáº§u</li>
        <li>Kiá»ƒm tra xem email Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng chÆ°a</li>
        <li>Äáº£m báº£o máº­t kháº©u Ä‘á»§ máº¡nh (8+ kÃ½ tá»±, cÃ³ chá»¯ hoa vÃ  sá»‘)</li>
        <li>Kiá»ƒm tra káº¿t ná»‘i internet cá»§a báº¡n</li>
        <li>Thá»­ lÃ m má»›i trang vÃ  Ä‘Äƒng kÃ½ láº¡i</li>
      </ul>
    </div>
  </div>
</div>
